<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AvoiderIo - ë¬´ë£Œ ì˜¨ë¼ì¸ ë‹·ì§€ ê²Œì„ (Free Online Dodge Game)</title>
    
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        
        gtag('config', 'G-XXXXXXXXXX', {
            cookie_flags: 'SameSite=None;Secure',
            anonymize_ip: true,
            site_speed_sample_rate: 100,
            custom_map: {
                'custom_parameter_1': 'game_level',
                'custom_parameter_2': 'final_score'
            }
        });
        
        // Game Analytics Functions
        function trackGameStart() {
            gtag('event', 'game_start', {
                event_category: 'game',
                event_label: 'new_game',
                value: 1
            });
        }
        
        function trackGameOver(score, level, time) {
            gtag('event', 'game_over', {
                event_category: 'game',
                event_label: 'game_completed',
                value: score,
                custom_parameter_1: level,
                custom_parameter_2: score,
                game_time: time
            });
        }
        
        function trackLevelUp(level) {
            gtag('event', 'level_up', {
                event_category: 'game',
                event_label: 'level_progression',
                value: level
            });
        }
        
        function trackHighScore(score, isNewRecord) {
            gtag('event', 'high_score', {
                event_category: 'achievement',
                event_label: isNewRecord ? 'new_record' : 'high_score',
                value: score
            });
        }
        
        function trackLeaderboardView() {
            gtag('event', 'leaderboard_view', {
                event_category: 'engagement',
                event_label: 'leaderboard_opened'
            });
        }
        
        function trackSoundToggle(enabled) {
            gtag('event', 'sound_toggle', {
                event_category: 'settings',
                event_label: enabled ? 'sound_on' : 'sound_off'
            });
        }
    </script>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="AvoiderIo - ì¥ì• ë¬¼ì„ í”¼í•´ ìµœëŒ€í•œ ì˜¤ë˜ ìƒì¡´í•˜ëŠ” ë¬´ë£Œ ì˜¨ë¼ì¸ ê²Œì„ì…ë‹ˆë‹¤. Dodge obstacles and survive as long as possible in this free online game!">
    <meta name="keywords" content="AvoiderIo, í”¼í•˜ê¸° ê²Œì„, dodge game, ë¬´ë£Œ ê²Œì„, free game, ì˜¨ë¼ì¸ ê²Œì„, online game, ì›¹ ê²Œì„, web game, ì•„ì¼€ì´ë“œ ê²Œì„, arcade game, ìƒì¡´ ê²Œì„, survival game, ë¸Œë¼ìš°ì € ê²Œì„, browser game">
    <meta name="robots" content="index, follow">
    
    <!-- Multilingual Meta -->
    <meta name="language" content="Korean, English">
    <link rel="alternate" hreflang="ko" href="https://avoiderio.xyz">
    <link rel="alternate" hreflang="en" href="https://avoiderio.xyz">
    <link rel="alternate" hreflang="x-default" href="https://avoiderio.xyz">
    
    <!-- Open Graph -->
    <meta property="og:title" content="AvoiderIo - ë¬´ë£Œ ì˜¨ë¼ì¸ í”¼í•˜ê¸° ê²Œì„ (Free Online Dodge Game)">
    <meta property="og:description" content="ì¥ì• ë¬¼ì„ í”¼í•´ ìµœëŒ€í•œ ì˜¤ë˜ ìƒì¡´í•˜ì„¸ìš”! Dodge obstacles and survive as long as possible!">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://avoiderio.xyz">
    <meta property="og:site_name" content="AvoiderIo">
    <meta property="og:locale" content="ko_KR">
    <meta property="og:locale:alternate" content="en_US">
    
    <!-- Google Search Console -->
    <!-- <meta name="google-site-verification" content="ì—¬ê¸°ì—_ë°›ì€_ì½”ë“œ_ì…ë ¥" /> -->
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://avoiderio.xyz">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Developer Mode Script -->
    <script>
        let DEVELOPER_MODE = true;

        window.toggleDevMode = function() {
            DEVELOPER_MODE = !DEVELOPER_MODE;
            console.log('ğŸ”§ ê°œë°œì ëª¨ë“œ (Developer Mode):', DEVELOPER_MODE ? 'ON' : 'OFF');
        };

        document.addEventListener('keydown', function(e) {
            if (!DEVELOPER_MODE) {
                if (e.key === 'F12' || 
                    (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key)) ||
                    (e.ctrlKey && e.key === 'U')) {
                    e.preventDefault();
                    e.stopPropagation();
                    console.log('ğŸš« ê°œë°œì ë„êµ¬ê°€ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤ (Developer tools blocked). ì½”ë‚˜ë¯¸ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (Enter Konami Code): â†‘â†‘â†“â†“â†â†’â†â†’');
                    return false;
                }
            }
        });

        document.addEventListener('contextmenu', function(e) {
            if (!DEVELOPER_MODE) {
                e.preventDefault();
                console.log('ğŸš« ìš°í´ë¦­ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤ (Right-click blocked). ì½”ë‚˜ë¯¸ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš” (Enter Konami Code): â†‘â†‘â†“â†“â†â†’â†â†’');
                return false;
            }
        });

        // Konami Code
        let secretSequence = [];
        const SECRET_CODE = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight'];

        document.addEventListener('keydown', function(e) {
            secretSequence.push(e.code);
            
            if (secretSequence.length > SECRET_CODE.length) {
                secretSequence.shift();
            }
            
            if (secretSequence.length === SECRET_CODE.length && 
                secretSequence.every((key, index) => key === SECRET_CODE[index])) {
                
                DEVELOPER_MODE = true;
                console.clear();
                console.log('ğŸ® ë¹„ë°€ ì½”ë“œ ì…ë ¥ ì™„ë£Œ! ê°œë°œì ëª¨ë“œ í™œì„±í™”! (Secret code complete! Developer mode activated!)');
                console.log('âœ¨ ì½”ë‚˜ë¯¸ ì½”ë“œ (Konami Code): â†‘â†‘â†“â†“â†â†’â†â†’');
                console.log('âœ… ì´ì œ ìš°í´ë¦­ì´ë‚˜ F12ë¡œ ê°œë°œì ë„êµ¬ë¥¼ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤! (You can now open developer tools with right-click or F12!)');
                toggleDevMode();
                secretSequence = [];
            }
        });
    </script>
</head>
<body>
    <!-- SEO Header -->
    <header style="position: absolute; left: -9999px;">
        <h1>AvoiderIo - ë¬´ë£Œ ì˜¨ë¼ì¸ í”¼í•˜ê¸° ê²Œì„ (Free Online Dodge Game)</h1>
        <p>ì¥ì• ë¬¼ì„ í”¼í•´ ìµœëŒ€í•œ ì˜¤ë˜ ìƒì¡´í•˜ëŠ” ë¬´ë£Œ ì˜¨ë¼ì¸ ê²Œì„ì…ë‹ˆë‹¤. WASD í‚¤ë‚˜ ë°©í–¥í‚¤ë¡œ í”Œë ˆì´ì–´ë¥¼ ì›€ì§ì—¬ ê°€ì‹œ, ë ˆì´ì €, í­íƒ„ì„ í”¼í•˜ì„¸ìš”. 
        Dodge obstacles and survive as long as possible in this free online game. Use WASD keys or arrow keys to move your player and avoid spikes, lasers, and bombs.</p>
    </header>

    <!-- Security Warning -->
    <div id="securityWarning" class="security-warning" style="display: none;">
        âš ï¸ ë¹„ì •ìƒì ì¸ í™œë™ì´ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. ê³µì •í•œ í”Œë ˆì´ë¥¼ ìœ„í•´ í˜‘ì¡°í•´ì£¼ì„¸ìš”. (Unusual activity detected. Please cooperate for fair play.)
    </div>
    
    <!-- Game Container -->
    <div class="game-container" id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600" 
                aria-label="AvoiderIo ê²Œì„ í™”ë©´ (AvoiderIo Game Screen)"
                role="img">
            ì´ ë¸Œë¼ìš°ì €ëŠ” Canvasë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”. (This browser does not support Canvas. Please use a modern browser.)
        </canvas>
        
        <!-- Pause Overlay -->
        <div class="pause-overlay" id="pauseOverlay" role="dialog" aria-labelledby="pauseTitle" aria-hidden="true">
            <div class="pause-menu">
                <h2 id="pauseTitle" class="pause-title">ì¼ì‹œì •ì§€ (PAUSED)</h2>
                <button class="pixel-button" onclick="resumeGame()" aria-label="ê²Œì„ ê³„ì†í•˜ê¸° (Continue Game)">
                    ê³„ì†í•˜ê¸° (CONTINUE)
                </button>
                <button class="pixel-button" onclick="goToMainMenu()" aria-label="ë©”ì¸ ë©”ë‰´ë¡œ ì´ë™ (Go to Main Menu)">
                    ë©”ì¸ ë©”ë‰´ (MAIN MENU)
                </button>
            </div>
        </div>
        
        <!-- Game Over Overlay -->
        <div class="game-over-overlay" id="gameOverOverlay" role="dialog" aria-labelledby="gameOverTitle" aria-hidden="true">
            <div class="game-over-menu">
                <h2 id="gameOverTitle" class="game-over-title">ê²Œì„ ì˜¤ë²„ (GAME OVER)</h2>
                <div class="final-score-display" aria-label="ìµœì¢… ì ìˆ˜ (Final Score)">
                    <span id="finalScore">0</span>
                </div>
                <div class="stats" role="group" aria-label="ê²Œì„ í†µê³„ (Game Statistics)">
                    <p>ë ˆë²¨ (Level): <span id="finalLevel" aria-label="ë„ë‹¬í•œ ë ˆë²¨ (Reached Level)">1</span></p>
                    <p>ìƒì¡´ ì‹œê°„ (Survival Time): <span id="finalTime" aria-label="ìƒì¡´í•œ ì‹œê°„ (Survived Time)">0</span>ì´ˆ (sec)</p>
                </div>
                <button class="pixel-button" onclick="startGame()" aria-label="ê²Œì„ ë‹¤ì‹œ ì‹œì‘ (Restart Game)">
                    ë‹¤ì‹œ ì‹œë„ (RETRY)
                </button>
                <button class="pixel-button" onclick="goToMainMenu()" aria-label="ë©”ì¸ ë©”ë‰´ë¡œ ì´ë™ (Go to Main Menu)">
                    ë©”ì¸ ë©”ë‰´ (MAIN MENU)
                </button>
            </div>
        </div>
        
        <!-- Leaderboard Overlay -->
        <div class="leaderboard-overlay" id="leaderboardOverlay" role="dialog" aria-labelledby="leaderboardTitle" aria-hidden="true">
            <div class="leaderboard-menu">
                <h2 id="leaderboardTitle" class="leaderboard-title">ìˆœìœ„í‘œ (LEADERBOARD)</h2>
                <div class="leaderboard-list" id="leaderboardList" role="list" aria-label="ìˆœìœ„í‘œ (Rankings)">
                    <!-- Leaderboard entries will be added here dynamically -->
                </div>
                <button class="pixel-button" onclick="closeLeaderboard()" aria-label="ë¦¬ë”ë³´ë“œ ë‹«ê¸° (Close Leaderboard)">
                    ë‹«ê¸° (CLOSE)
                </button>
            </div>
        </div>
        
        <!-- Name Input Overlay -->
        <div class="name-input-overlay" id="nameInputOverlay" role="dialog" aria-labelledby="nameInputTitle" aria-hidden="true">
            <div class="name-input-menu">
                <h2 id="nameInputTitle" class="name-input-title">ì‹ ê¸°ë¡! (NEW RECORD!)</h2>
                <p class="record-message">ì¶•í•˜í•©ë‹ˆë‹¤! ìƒˆë¡œìš´ ê¸°ë¡ì„ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤! (Congratulations! You achieved a new record!)</p>
                <div class="record-stats" role="group" aria-label="ë‹¬ì„±í•œ ê¸°ë¡ (Achieved Record)">
                    <p>ì ìˆ˜ (Score): <span id="recordScore" aria-label="ë‹¬ì„±í•œ ì ìˆ˜ (Achieved Score)">0</span></p>
                    <p>ë ˆë²¨ (Level): <span id="recordLevel" aria-label="ë„ë‹¬í•œ ë ˆë²¨ (Reached Level)">1</span></p>
                    <p>ìƒì¡´ ì‹œê°„ (Survival Time): <span id="recordTime" aria-label="ìƒì¡´í•œ ì‹œê°„ (Survived Time)">0</span>ì´ˆ (sec)</p>
                </div>
                <div class="name-input-container">
                    <label for="playerName">ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš” (Enter your name):</label>
                    <input type="text" 
                           id="playerName" 
                           maxlength="15" 
                           placeholder="í”Œë ˆì´ì–´ (Player)"
                           autocomplete="off"
                           spellcheck="false"
                           aria-label="í”Œë ˆì´ì–´ ì´ë¦„ ì…ë ¥ (Enter Player Name)">
                </div>
                <button class="pixel-button" onclick="submitRecord()" aria-label="ê¸°ë¡ ë“±ë¡ (Submit Record)">
                    ë“±ë¡ (SUBMIT)
                </button>
                <button class="pixel-button secondary" onclick="skipRecord()" aria-label="ê¸°ë¡ ë“±ë¡ ê±´ë„ˆë›°ê¸° (Skip Record Registration)">
                    ê±´ë„ˆë›°ê¸° (SKIP)
                </button>
            </div>
        </div>
        
        <!-- Bottom Controls -->
        <div class="bottom-controls" role="complementary" aria-label="ê²Œì„ ì¡°ì‘ë²• (Game Controls)">
            <kbd>WASD</kbd>/<kbd>ë°©í–¥í‚¤ (Arrow Keys)</kbd>: ì´ë™ (Move) | <kbd>ESC</kbd>: ì¼ì‹œì •ì§€ (Pause) | <kbd>Space</kbd>: ê²Œì„ ì‹œì‘ (Start Game)
        </div>
    </div>

    <!-- Hidden Accessibility Info -->
    <div class="sr-only" id="gameInstructions">
        ì´ ê²Œì„ì€ ì¥ì• ë¬¼ì„ í”¼í•´ ìµœëŒ€í•œ ì˜¤ë˜ ìƒì¡´í•˜ëŠ” ê²Œì„ì…ë‹ˆë‹¤. WASD í‚¤ë‚˜ ë°©í–¥í‚¤ë¡œ í”Œë ˆì´ì–´ë¥¼ ì›€ì§ì—¬ ê°€ì‹œ, ë ˆì´ì €, í­íƒ„ì„ í”¼í•˜ì„¸ìš”. í•˜íŠ¸ ì•„ì´í…œì„ ë¨¹ìœ¼ë©´ ìƒëª…ë ¥ì´ íšŒë³µë©ë‹ˆë‹¤.
        This is a survival game where you dodge obstacles to survive as long as possible. Use WASD keys or arrow keys to move your player and avoid spikes, lasers, and bombs. Collect heart items to restore your health.
    </div>

    <!-- JavaScript Files -->
    <script src="config.js"></script>
    <script src="utils.js"></script>
    <script src="sound.js"></script>
    <script src="leaderboard.js"></script>
    <script src="arena.js"></script>
    <script src="effects.js"></script>
    <script src="obstacle.js"></script>
    <script src="obstacle_spawner.js"></script>
    <script src="player.js"></script>
    <script src="game.js"></script>
    <script src="main.js"></script>
    
    <!-- Error Handling and Logging -->
    <script>
        window.addEventListener('error', function(e) {
            console.error('ê²Œì„ ì˜¤ë¥˜ (Game Error):', e.error);
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'exception', {
                    description: e.error ? e.error.toString() : 'Unknown error',
                    fatal: false
                });
            }
        });
        
        window.addEventListener('unhandledrejection', function(e) {
            console.error('ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€ (Unhandled Promise Rejection):', e.reason);
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'exception', {
                    description: 'Unhandled Promise Rejection: ' + e.reason,
                    fatal: false
                });
            }
        });
        
        window.addEventListener('load', function() {
            console.log('AvoiderIo ê²Œì„ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. (AvoiderIo game loaded successfully.)');
            
            if (typeof gtag !== 'undefined') {
                gtag('event', 'page_view', {
                    page_title: 'AvoiderIo Game',
                    page_location: window.location.href
                });
            }
            
            document.addEventListener('click', function initAudio() {
                if (typeof soundManager !== 'undefined') {
                    try {
                        const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        if (audioContext.state === 'suspended') {
                            audioContext.resume();
                        }
                    } catch (error) {
                        console.warn('ì˜¤ë””ì˜¤ ì»¨í…ìŠ¤íŠ¸ ì´ˆê¸°í™” ì‹¤íŒ¨ (Audio context initialization failed):', error);
                    }
                }
                document.removeEventListener('click', initAudio);
            });
        });
        
        // Session time tracking
        let sessionStartTime = Date.now();
        window.addEventListener('beforeunload', function() {
            const sessionDuration = Math.round((Date.now() - sessionStartTime) / 1000);
            if (typeof gtag !== 'undefined') {
                gtag('event', 'session_duration', {
                    event_category: 'engagement',
                    value: sessionDuration
                });
            }
        });
    </script>
</body>
</html>